<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dijkstra Visualizer (Simplified)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; }
    #explainBox { border: 1px solid black; padding: 10px; margin-top: 10px; min-height: 60px; background: #f9f9f9; }
  </style>
</head>
<body>
  <h2>Dijkstra’s Algorithm Visualizer</h2>

  <!-- Input Section -->
  <h3>Graph Input</h3>
  <label>Number of Vertices:</label>
  <input type="number" id="numVertices" min="2" value="4"><br><br>

  <label>Number of Edges:</label>
  <input type="number" id="numEdges" min="1" value="5"><br><br>

  <button onclick="makeEdgeInputs()">Generate Edge Inputs</button>
  <div id="edgeInputs"></div>
  <button onclick="buildGraph()">Build Graph</button>

  <!-- Adjacency Matrix -->
  <h3>Adjacency Matrix</h3>
  <div id="matrix"></div>

  <!-- Distance Table -->
  <h3>Distance Table</h3>
  <table id="distTable">
    <thead>
      <tr><th>Step</th><th>Chosen Node</th><th>Distances (d[])</th><th>Parents (π[])</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Explanation -->
  <h3>Step Explanation</h3>
  <div id="explainBox">Build a graph and click "Step".</div>

  <!-- Controls -->
  <button onclick="resetDijkstra()">Reset</button>
  <button onclick="runStep()">Step</button>

  <script>
    let V = 0, E = 0;
    let adjMatrix = [];
    let dist = [], parent = [], visited = [];
    let pq = [];
    let step = 0;

    // Generate edge input fields
    function makeEdgeInputs() {
      V = parseInt(document.getElementById("numVertices").value);
      E = parseInt(document.getElementById("numEdges").value);
      let html = "<h4>Enter Edges (u v w)</h4><p>(Use A,B,C... for vertices)</p>";
      for (let i = 0; i < E; i++) {
        html += "Edge " + (i+1) + ": " +
          "<input size='1' id='u"+i+"' placeholder='u'>" +
          "<input size='1' id='v"+i+"' placeholder='v'>" +
          "<input size='2' id='w"+i+"' placeholder='w'><br>";
      }
      document.getElementById("edgeInputs").innerHTML = html;
    }

    // Build adjacency matrix
    function buildGraph() {
      adjMatrix = Array.from({length:V},()=>Array(V).fill("∞"));
      for (let i=0; i<V; i++) adjMatrix[i][i]=0;
      for (let i=0; i<E; i++) {
        let u = document.getElementById("u"+i).value.toUpperCase().charCodeAt(0)-65;
        let v = document.getElementById("v"+i).value.toUpperCase().charCodeAt(0)-65;
        let w = parseInt(document.getElementById("w"+i).value);
        adjMatrix[u][v]=w;
        adjMatrix[v][u]=w; // undirected
      }
      updateMatrix();
      resetDijkstra();
    }

    // Show adjacency matrix
    function updateMatrix() {
      let html="<table><tr><th></th>";
      for (let i=0; i<V; i++) html+="<th>"+String.fromCharCode(65+i)+"</th>";
      html+="</tr>";
      for (let i=0; i<V; i++) {
        html+="<tr><th>"+String.fromCharCode(65+i)+"</th>";
        for (let j=0; j<V; j++) html+="<td>"+adjMatrix[i][j]+"</td>";
        html+="</tr>";
      }
      html+="</table>";
      document.getElementById("matrix").innerHTML=html;
    }

    // Reset Dijkstra
    function resetDijkstra() {
      dist=Array(V).fill(Infinity);
      parent=Array(V).fill("-");
      visited=Array(V).fill(false);
      dist[0]=0; // source = A
      pq=[0];
      step=0;
      document.querySelector("#distTable tbody").innerHTML="";
      document.getElementById("explainBox").innerHTML="Graph ready. Press Step.";
    }

    // One step of Dijkstra
    function runStep() {
      if (pq.length==0) { 
        document.getElementById("explainBox").innerHTML="✅ Algorithm finished.";
        return;
      }
      // Pick node with smallest distance
      let u = pq.reduce((a,b)=>dist[a]<dist[b]?a:b);
      pq = pq.filter(x=>x!=u);
      if (visited[u]) return runStep();
      visited[u]=true;

      let exp = "Step "+(++step)+": Choosing node "+String.fromCharCode(65+u)+" with dist="+dist[u]+"<br>";

      for (let v=0; v<V; v++) {
        if (adjMatrix[u][v]!="∞" && !visited[v]) {
          let candidate = dist[u]+parseInt(adjMatrix[u][v]);
          if (candidate < dist[v]) {
            exp += "✔ Updating "+String.fromCharCode(65+v)+": candidate="+candidate+" < current="+dist[v]+" → parent="+String.fromCharCode(65+u)+"<br>";
            dist[v]=candidate;
            parent[v]=String.fromCharCode(65+u);
            pq.push(v);
          } else {
            exp += "✘ Rejecting "+String.fromCharCode(65+v)+": candidate="+candidate+" ≥ current="+dist[v]+"<br>";
          }
        }
      }

      let row="<tr><td>"+step+"</td><td>"+String.fromCharCode(65+u)+"</td><td>"+dist.map(d=>d==Infinity?"∞":d).join(", ")+"</td><td>"+parent.join(", ")+"</td></tr>";
      document.querySelector("#distTable tbody").innerHTML+=row;

      document.getElementById("explainBox").innerHTML=exp;
    }
  </script>
</body>
</html>









